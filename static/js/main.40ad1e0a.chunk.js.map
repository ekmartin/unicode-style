{"version":3,"sources":["Buttons/Buttons.module.css","Buttons/twitter.svg","Buttons/copy.svg","Toolbar/ToolbarButton.module.css","Toolbar/Toolbar.module.css","Toolbar/index.js","Buttons/index.js","App.js","registerServiceWorker.js","index.js"],"names":["module","exports","buttons","copy","tweet","React","__webpack_require__","Twitter","props","createElement","fill","d","displayName","defaultProps","aria-hidden","data-prefix","data-icon","className","role","viewBox","default","Copy","buttonWrapper","button","active","toolbar","Toolbar_createSpan","text","react_default","a","style","lineHeight","height","DoubleButton","Object","draft_js_buttons_lib","children","ScriptButton","FrakturButton","inlineToolbarPlugin","draft_js_inline_toolbar_plugin_lib_default","structure","draft_js_inline_toolbar_plugin_lib","theme","buttonStyles","ToolbarButton_module_default","toolbarStyles","Toolbar_module_default","InlineToolbar","Buttons_Buttons","onCopy","element","document","value","_this","setAttribute","position","left","body","appendChild","select","execCommand","removeChild","encoded","encodeURIComponent","this","url","concat","Buttons_module_default","onClick","copy_default","href","twitter_default","react","MIN_LOWER","charCodeAt","MAX_LOWER","MIN_UPPER","MAX_UPPER","APPENDERS","UNDERLINE","SURROGATE","COMBINED_TRANSFORMS","BOLDITALIC","modifier","TRANSFORMS","DOUBLE","exclusive","SCRIPT","CODE","FRAKTUR","BOLD","ITALIC","STYLE_MAP","isCapital","code","combineStyles","styles","combined","filter","sort","join","appenders","map","transforms","s","t","applyTransform","transform","runes_default","char","isLower","mod","String","fromCharCode","applyStyle","appendChar","reduce","str","applyAppender","removeStyle","split","c","removeAppender","_modifier","_slicedToArray","lower","upper","removeTransform","src_App_0","state","editorState","lib_Draft","createEmpty","handleKeyCommand","command","newState","onChange","handleBeforeInput","getCurrentInlineStyle","selection","getSelection","content","getCurrentContent","styledText","push","replaceText","currentContent","currentStyle","rawStyle","newContent","lastChange","getLastChangeType","setState","newStyle","oldStyles","newStyles","find","oldTransforms","subtract","filterStyles","currentText","draftjs_utils","rawText","replaced","refs","editor","focus","plainText","getPlainText","color","lib_default","ref","placeholder","plugins","customStyleMap","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","catch","error","react_dom_default","render","getElementById","URL","origin","addEventListener","fetch","response","status","headers","get","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.40ad1e0a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttons\":\"Buttons_buttons__3Av3u\",\"copy\":\"Buttons_copy__1J4Z3\",\"tweet\":\"Buttons_tweet__Ox6Wm\"};","var React = require('react');\n\nfunction Twitter (props) {\n    return React.createElement(\"svg\",props,React.createElement(\"path\",{\"fill\":\"currentColor\",\"d\":\"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z\"}));\n}\n\nTwitter.displayName = \"Twitter\";\n\nTwitter.defaultProps = {\"aria-hidden\":\"true\",\"data-prefix\":\"fab\",\"data-icon\":\"twitter\",\"className\":\"svg-inline--fa fa-twitter fa-w-16\",\"role\":\"img\",\"viewBox\":\"0 0 512 512\"};\n\nmodule.exports = Twitter;\n\nTwitter.default = Twitter;\n","var React = require('react');\n\nfunction Copy (props) {\n    return React.createElement(\"svg\",props,React.createElement(\"path\",{\"fill\":\"currentColor\",\"d\":\"M320 448v40c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V120c0-13.255 10.745-24 24-24h72v296c0 30.879 25.121 56 56 56h168zm0-344V0H152c-13.255 0-24 10.745-24 24v368c0 13.255 10.745 24 24 24h272c13.255 0 24-10.745 24-24V128H344c-13.2 0-24-10.8-24-24zm120.971-31.029L375.029 7.029A24 24 0 0 0 358.059 0H352v96h96v-6.059a24 24 0 0 0-7.029-16.97z\"}));\n}\n\nCopy.displayName = \"Copy\";\n\nCopy.defaultProps = {\"aria-hidden\":\"true\",\"data-prefix\":\"fas\",\"data-icon\":\"copy\",\"className\":\"svg-inline--fa fa-copy fa-w-14\",\"role\":\"img\",\"viewBox\":\"0 0 448 512\"};\n\nmodule.exports = Copy;\n\nCopy.default = Copy;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttonWrapper\":\"ToolbarButton_buttonWrapper__1iV6p\",\"button\":\"ToolbarButton_button__29O8T\",\"active\":\"ToolbarButton_active__1TguK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbar\":\"Toolbar_toolbar__3cIgu\"};","import React from 'react';\nimport toolbarStyles from './Toolbar.module.css';\nimport buttonStyles from './ToolbarButton.module.css';\nimport createInlineToolbarPlugin, {\n  Separator\n} from 'draft-js-inline-toolbar-plugin';\nimport {\n  createInlineStyleButton,\n  BoldButton,\n  ItalicButton,\n  UnderlineButton,\n  CodeButton\n} from 'draft-js-buttons';\n\n// Match the height of the existing buttons:\nconst createSpan = text => (\n  <span style={{ lineHeight: '24px', height: 24 }}>{text}</span>\n);\n\nconst DoubleButton = createInlineStyleButton({\n  style: 'DOUBLE',\n  children: createSpan('ð”»')\n});\n\nconst ScriptButton = createInlineStyleButton({\n  style: 'SCRIPT',\n  children: createSpan('ð’®')\n});\n\nconst FrakturButton = createInlineStyleButton({\n  style: 'FRAKTUR',\n  children: createSpan('ð”‰')\n});\n\nconst inlineToolbarPlugin = createInlineToolbarPlugin({\n  structure: [\n    BoldButton,\n    ItalicButton,\n    UnderlineButton,\n    Separator,\n    CodeButton,\n    FrakturButton,\n    DoubleButton,\n    ScriptButton\n  ],\n  theme: { buttonStyles, toolbarStyles }\n});\n\nconst { InlineToolbar } = inlineToolbarPlugin;\nexport { InlineToolbar, inlineToolbarPlugin };\n","/* eslint-disable import/no-webpack-loader-syntax */\nimport styles from './Buttons.module.css';\nimport CopyIcon from '-!svg-react-loader!./copy.svg';\nimport TweetIcon from '-!svg-react-loader!./twitter.svg';\nimport React, { Component } from 'react';\n\nconst TWEET_URL = 'https://twitter.com/intent/tweet';\n\nexport default class Buttons extends Component {\n  onCopy = () => {\n    const element = document.createElement('textarea');\n    element.value = this.props.text;\n    element.setAttribute('readonly', '');\n    element.style.position = 'absolute';\n    element.style.left = '-9999px';\n    document.body.appendChild(element);\n    element.select();\n    document.execCommand('copy');\n    document.body.removeChild(element);\n  };\n\n  render() {\n    const encoded = encodeURIComponent(this.props.text);\n    const url = `${TWEET_URL}?text=${encoded}`;\n    return (\n      <div className={styles.buttons}>\n        <button onClick={this.onCopy} className={styles.copy}>\n          <CopyIcon />\n          Copy\n        </button>\n        <a href={url} className={styles.tweet}>\n          <TweetIcon />\n          Tweet\n        </a>\n      </div>\n    );\n  }\n}\n","/**\n * TODO:\n *  * Toolbar shouldn't close on clicks\n *      Need to calculate a new SelectionState after changes\n *      (find the new focusOffset based on the content)\n *  * Design\n *  * Mobile support\n *  * Support numbers\n *  * Undo/redo needs to group style changes with the text modifications\n */\n\nimport 'draft-js-inline-toolbar-plugin/lib/plugin.css';\nimport 'draft-js/dist/Draft.css';\nimport './App.css';\nimport React, { Component } from 'react';\nimport runes from 'runes';\nimport { getSelectionText } from 'draftjs-utils';\nimport Editor from 'draft-js-plugins-editor';\nimport { Modifier, EditorState, RichUtils } from 'draft-js';\nimport { InlineToolbar, inlineToolbarPlugin } from './Toolbar';\nimport Buttons from './Buttons';\n\nconst MIN_LOWER = 'a'.charCodeAt(0);\nconst MAX_LOWER = 'z'.charCodeAt(0);\nconst MIN_UPPER = 'A'.charCodeAt(0);\nconst MAX_UPPER = 'Z'.charCodeAt(0);\n\nconst APPENDERS = {\n  UNDERLINE: 'Ì²'\n};\n\nconst SURROGATE = 0xd835;\nconst COMBINED_TRANSFORMS = {\n  BOLDITALIC: {\n    modifier: [0xddf5, 0xddfb]\n  }\n};\n\nconst TRANSFORMS = {\n  DOUBLE: {\n    exclusive: true,\n    modifier: [0xdcf1, 0xdcf7]\n  },\n  SCRIPT: {\n    exclusive: true,\n    modifier: [0xdc55, 0xdc5b]\n  },\n  CODE: {\n    exclusive: true,\n    modifier: [0xde29, 0xde2f]\n  },\n  FRAKTUR: {\n    exclusive: true,\n    modifier: [0xdcbd, 0xdcc3]\n  },\n  BOLD: {\n    exclusive: false,\n    modifier: [0xdd8d, 0xdd93]\n  },\n  ITALIC: {\n    exclusive: false,\n    modifier: [0xddc1, 0xddc7]\n  }\n};\n\nconst STYLE_MAP = {\n  BOLD: {},\n  UNDERLINE: {},\n  ITALIC: {},\n  CODE: {},\n  DOUBLE: {},\n  SCRIPT: {},\n  FRAKTUR: {}\n};\n\nfunction isLower(code) {\n  return code >= MIN_LOWER && code <= MAX_LOWER;\n}\n\nfunction isCapital(code) {\n  return code >= MIN_UPPER && code <= MAX_UPPER;\n}\n\nfunction filterStyles(oldStyles, newStyles) {\n  const exclusive = newStyles.find(s => {\n    const transform = TRANSFORMS[s];\n    return transform && transform.exclusive;\n  });\n\n  if (exclusive) {\n    const oldTransforms = oldStyles.filter(s => TRANSFORMS[s]);\n    return newStyles.subtract(oldTransforms);\n  }\n\n  return newStyles;\n}\n\nfunction combineStyles(styles) {\n  const combined = styles\n    .filter(style => TRANSFORMS[style])\n    .sort()\n    .join('');\n  const appenders = styles.map(style => APPENDERS[style]).filter(a => a);\n  const transforms =\n    COMBINED_TRANSFORMS[combined] ||\n    styles.map(s => TRANSFORMS[s]).filter(t => t);\n  return appenders.concat(transforms);\n}\n\nfunction applyTransform(transform, text) {\n  const { modifier } = transform;\n  return runes(text)\n    .map(char => {\n      const code = char.charCodeAt(0);\n      if (isCapital(code) || isLower(code)) {\n        const mod = isCapital(code) ? modifier[1] : modifier[0];\n        return String.fromCharCode(SURROGATE, mod + code);\n      }\n\n      return char;\n    })\n    .join('');\n}\n\nfunction applyAppender(appendChar, text) {\n  return runes(text).reduce((str, char) => str + char + appendChar, '');\n}\n\nfunction removeTransform(transform, text) {\n  const { modifier } = transform;\n  return runes(text)\n    .map(char => {\n      if (char.charCodeAt(0) !== SURROGATE) {\n        return char;\n      }\n\n      const code = char.charCodeAt(1);\n      const [lower, upper] = modifier;\n      if (MIN_LOWER + lower <= code && MAX_LOWER + lower >= code) {\n        return String.fromCharCode(code - lower);\n      } else if (MIN_UPPER + upper <= code && MAX_UPPER + upper >= code) {\n        return String.fromCharCode(code - upper);\n      }\n\n      return char;\n    })\n    .join('');\n}\n\nfunction removeAppender(appendChar, text) {\n  return text\n    .split('')\n    .filter(c => c !== appendChar)\n    .join('');\n}\n\nfunction applyStyle(style, text) {\n  if (typeof style === 'string') {\n    return applyAppender(style, text);\n  }\n\n  return applyTransform(style, text);\n}\n\nfunction removeStyle(style, text) {\n  if (typeof style === 'string') {\n    return removeAppender(style, text);\n  }\n\n  return removeTransform(style, text);\n}\n\nclass App extends Component {\n  state = {\n    editorState: EditorState.createEmpty()\n  };\n\n  handleKeyCommand = (command, editorState) => {\n    const newState = RichUtils.handleKeyCommand(editorState, command);\n    if (newState) {\n      this.onChange(newState);\n      return 'handled';\n    }\n\n    return 'not-handled';\n  };\n\n  handleBeforeInput = (str, editorState) => {\n    const style = editorState.getCurrentInlineStyle();\n    const selection = editorState.getSelection();\n    const content = editorState.getCurrentContent();\n    const styledText = combineStyles(style).reduce(\n      (text, style) => applyStyle(style, text),\n      str\n    );\n\n    const newState = EditorState.push(\n      editorState,\n      Modifier.replaceText(content, selection, styledText, style),\n      'insert-characters'\n    );\n\n    this.onChange(newState);\n    return 'handled';\n  };\n\n  onChange = editorState => {\n    const currentContent = this.state.editorState.getCurrentContent();\n    const currentStyle = this.state.editorState.getCurrentInlineStyle();\n    const rawStyle = editorState.getCurrentInlineStyle();\n    const newContent = editorState.getCurrentContent();\n    const lastChange = editorState.getLastChangeType();\n    if (\n      currentContent === newContent ||\n      lastChange !== 'change-inline-style' ||\n      currentStyle === rawStyle\n    ) {\n      return this.setState({ editorState });\n    }\n\n    const newStyle = filterStyles(currentStyle, rawStyle);\n    const selection = editorState.getSelection();\n    const content = editorState.getCurrentContent();\n    const currentText = getSelectionText(editorState);\n    const rawText = combineStyles(currentStyle).reduce(\n      (text, style) => removeStyle(style, text),\n      currentText\n    );\n\n    const styledText = combineStyles(newStyle).reduce(\n      (text, style) => applyStyle(style, text),\n      rawText\n    );\n\n    const replaced = Modifier.replaceText(\n      content,\n      selection,\n      styledText,\n      newStyle\n    );\n\n    this.setState({\n      editorState: EditorState.push(\n        editorState,\n        replaced,\n        'change-inline-style'\n      )\n    });\n  };\n\n  componentDidMount() {\n    this.refs.editor.focus();\n  }\n\n  render() {\n    const { editorState } = this.state;\n    const plainText = editorState.getCurrentContent().getPlainText();\n    return (\n      <div className=\"App\">\n        <div className=\"Content\">\n          <h1>\n            <span>unicode</span>\n            <span style={{ color: '#05f' }}>.</span>\n            <i>style</i>\n          </h1>\n          <Editor\n            ref=\"editor\"\n            placeholder=\"Write, highlight, and style away.\"\n            editorState={editorState}\n            handleKeyCommand={this.handleKeyCommand}\n            handleBeforeInput={this.handleBeforeInput}\n            onChange={this.onChange}\n            plugins={[inlineToolbarPlugin]}\n            customStyleMap={STYLE_MAP}\n          />\n          <InlineToolbar />\n          <Buttons text={plainText} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\nregisterServiceWorker();\n"],"sourceRoot":""}